# =============================================================================
# PrawnikGPT - Environment Configuration
# =============================================================================
# Copy this file to .env and configure for your deployment scenario
#
# This application is designed to be deployment-agnostic and can run in:
# 1. All-in-one (single machine)
# 2. Distributed (frontend/backend separate from services)
# 3. Cloud/hybrid (any combination)
#
# Configure the URLs below based on your chosen architecture.
# =============================================================================

# =============================================================================
# DEPLOYMENT SCENARIOS - Choose one and uncomment
# =============================================================================

# ─────────────────────────────────────────────────────────────────────────────
# SCENARIO 1: All-in-one (Single Machine)
# ─────────────────────────────────────────────────────────────────────────────
# Everything runs on the same machine (localhost)
# Good for: Development, small deployments, testing
#
# SUPABASE_URL=http://localhost:8444
# OLLAMA_HOST=http://localhost:11434
# PUBLIC_SUPABASE_URL=http://localhost:8444
# PUBLIC_API_BASE_URL=http://localhost:8000

# ─────────────────────────────────────────────────────────────────────────────
# SCENARIO 2: Distributed (Separate Machines)
# ─────────────────────────────────────────────────────────────────────────────
# Frontend + Backend on one machine, Supabase + OLLAMA on another
# Good for: Development with dedicated GPU server, better resource separation
#
# Replace 192.168.0.11 with your actual server IP
# SUPABASE_URL=http://192.168.0.11:8444
# OLLAMA_HOST=http://192.168.0.11:11434
# PUBLIC_SUPABASE_URL=http://192.168.0.11:8444
# PUBLIC_API_BASE_URL=http://localhost:8000

# ─────────────────────────────────────────────────────────────────────────────
# SCENARIO 3: Cloud/Production
# ─────────────────────────────────────────────────────────────────────────────
# Services deployed to cloud providers
# Good for: Production deployments
#
# SUPABASE_URL=https://your-project.supabase.co
# OLLAMA_HOST=https://your-ollama-server.com:11434
# PUBLIC_SUPABASE_URL=https://your-project.supabase.co
# PUBLIC_API_BASE_URL=https://your-api-domain.com

# ─────────────────────────────────────────────────────────────────────────────
# SCENARIO 4: Hybrid (Mixed Local/Cloud)
# ─────────────────────────────────────────────────────────────────────────────
# Example: Local OLLAMA, Cloud Supabase
#
# SUPABASE_URL=https://your-project.supabase.co
# OLLAMA_HOST=http://192.168.0.11:11434
# PUBLIC_SUPABASE_URL=https://your-project.supabase.co
# PUBLIC_API_BASE_URL=http://localhost:8000

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================
# Fill in the values below based on your chosen scenario

# ─── Supabase Configuration ───
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_KEY=
SUPABASE_JWT_SECRET=

# How to get these values:
# - All-in-one: docker exec <supabase-container> supabase status
# - Cloud: From your Supabase project settings (https://app.supabase.com)

# ─── OLLAMA Configuration ───
OLLAMA_HOST=

# Required models (must be pulled on OLLAMA server):
# ollama pull nomic-embed-text   # For embeddings (768-dim)
# ollama pull mistral:7b          # For fast responses (<15s)
# ollama pull gpt-oss:120b        # For detailed responses (<240s)

# Verify OLLAMA is accessible:
# curl ${OLLAMA_HOST}/api/version

# ─── Frontend Configuration (Astro) ───
PUBLIC_API_BASE_URL=
PUBLIC_SUPABASE_URL=
PUBLIC_SUPABASE_ANON_KEY=

# ─── Optional: Redis (for RAG context caching) ───
REDIS_URL=redis://localhost:6379/0
# Or remote: redis://your-redis-server:6379/0

# =============================================================================
# LOGGING & DEBUGGING
# =============================================================================
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

DEBUG=true
# Set to false in production

# =============================================================================
# PORT CONFIGURATION (Optional - defaults shown)
# =============================================================================
# Override these if you need different ports

# FRONTEND_PORT=4321  # Astro dev server
# BACKEND_PORT=8000   # FastAPI server
# SUPABASE_PORT=8444  # Supabase (if running locally)
# OLLAMA_PORT=11434   # OLLAMA (if running locally)

# =============================================================================
# NETWORK TROUBLESHOOTING
# =============================================================================
#
# If services cannot connect, check:
#
# 1. Firewall rules (if distributed deployment):
#    - Allow TCP traffic on Supabase port (8444)
#    - Allow TCP traffic on OLLAMA port (11434)
#
# 2. Service binding addresses:
#    - Services must bind to 0.0.0.0 (not 127.0.0.1) for remote access
#    - Check: netstat -tlnp | grep <port>
#
# 3. Docker network (if using Docker):
#    - Ensure containers expose ports to host
#    - Check: docker ps (verify port mappings)
#
# 4. Test connectivity:
#    curl ${SUPABASE_URL}/health
#    curl ${OLLAMA_HOST}/api/version
#
# 5. DNS/Hostname resolution:
#    - Use IP addresses if hostname doesn't resolve
#    - Check: ping your-server-hostname
#
# =============================================================================
# PRODUCTION CHECKLIST
# =============================================================================
#
# Before deploying to production:
# [ ] Set DEBUG=false
# [ ] Use HTTPS URLs (not HTTP)
# [ ] Rotate all secrets (SUPABASE_SERVICE_KEY, JWT_SECRET)
# [ ] Enable rate limiting
# [ ] Configure CORS for production domains
# [ ] Set up monitoring and logging
# [ ] Configure backups for Supabase
# [ ] Test failover scenarios
#
# =============================================================================
